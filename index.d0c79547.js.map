{"mappings":"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","sources":["<anon>","src/scripts/main.js"],"sourcesContent":["var $09e991522ca7e64e$exports = {};\n\"use strict\";\nconst $09e991522ca7e64e$var$button = document.querySelector(\".button\");\nconst $09e991522ca7e64e$var$messageStart = document.querySelector(\".message-start\");\nconst $09e991522ca7e64e$var$messageWin = document.querySelector(\".message-win\");\nconst $09e991522ca7e64e$var$messageLose = document.querySelector(\".message-lose\");\nconst $09e991522ca7e64e$var$fieldCell = Array.from(document.querySelectorAll(\".field-cell\"));\nconst $09e991522ca7e64e$var$gameScore = document.querySelector(\".game-score\");\nconst $09e991522ca7e64e$var$rows = 4;\nconst $09e991522ca7e64e$var$columns = 4;\nlet $09e991522ca7e64e$var$score = 0;\nlet $09e991522ca7e64e$var$field = Array.from({\n    length: $09e991522ca7e64e$var$columns\n}, ()=>Array($09e991522ca7e64e$var$rows).fill(0));\n$09e991522ca7e64e$var$updateInterface();\n$09e991522ca7e64e$var$button.addEventListener(\"click\", ()=>{\n    $09e991522ca7e64e$var$field = Array.from({\n        length: $09e991522ca7e64e$var$columns\n    }, ()=>Array($09e991522ca7e64e$var$rows).fill(0));\n    $09e991522ca7e64e$var$score = 0;\n    $09e991522ca7e64e$var$gameScore.textContent = $09e991522ca7e64e$var$score;\n    $09e991522ca7e64e$var$button.classList.remove(\"start\");\n    $09e991522ca7e64e$var$button.classList.add(\"restart\");\n    $09e991522ca7e64e$var$button.textContent = \"Restart\";\n    $09e991522ca7e64e$var$messageStart.classList.add(\"hidden\");\n    $09e991522ca7e64e$var$messageWin.classList.add(\"hidden\");\n    $09e991522ca7e64e$var$messageLose.classList.add(\"hidden\");\n    $09e991522ca7e64e$var$updateInterface();\n    $09e991522ca7e64e$var$makeItem(2);\n    $09e991522ca7e64e$var$updateInterface();\n});\nfunction $09e991522ca7e64e$var$removeClassesExceptOne(element, classToKeep = \"field-cell\") {\n    const classes = element.classList;\n    const classesToRemove = Array.from(classes);\n    classesToRemove.forEach(function(className) {\n        if (className !== classToKeep) classes.remove(className);\n    });\n}\nfunction $09e991522ca7e64e$var$getRandom(countVars) {\n    return Math.round(Math.random() * (countVars - 1));\n}\nfunction $09e991522ca7e64e$var$makeItem(countOfItems = 1) {\n    $09e991522ca7e64e$var$updateInterface();\n    let randomRow = $09e991522ca7e64e$var$getRandom($09e991522ca7e64e$var$rows);\n    let randomCol = $09e991522ca7e64e$var$getRandom($09e991522ca7e64e$var$columns);\n    if ($09e991522ca7e64e$var$messageWin.classList.contains(\"hidden\")) {\n        if ($09e991522ca7e64e$var$messageStart.classList.length === 3) {\n            if ($09e991522ca7e64e$var$field.some((x)=>x.some((y)=>y === 0))) for(let i = 0; i < countOfItems; i++){\n                while($09e991522ca7e64e$var$field[randomRow][randomCol] !== 0){\n                    randomRow = $09e991522ca7e64e$var$getRandom($09e991522ca7e64e$var$rows);\n                    randomCol = $09e991522ca7e64e$var$getRandom($09e991522ca7e64e$var$columns);\n                }\n                const value = $09e991522ca7e64e$var$getRandom(100) < 10 ? 4 : 2;\n                $09e991522ca7e64e$var$field[randomRow][randomCol] = value;\n                $09e991522ca7e64e$var$updateInterface();\n            }\n            else $09e991522ca7e64e$var$messageLose.classList.remove(\"hidden\");\n        }\n    }\n}\nfunction $09e991522ca7e64e$var$updateInterface() {\n    $09e991522ca7e64e$var$field.forEach((row, rowIndex)=>{\n        row.forEach((value, colIndex)=>{\n            const cell = $09e991522ca7e64e$var$fieldCell[rowIndex * 4 + colIndex];\n            cell.textContent = \"\";\n            $09e991522ca7e64e$var$removeClassesExceptOne(cell);\n            cell.classList.add(\"field-cell--0\");\n            cell.classList.add(`field-cell--${value}`);\n            cell.textContent = value === 0 ? \"\" : value;\n        });\n    });\n}\nfunction $09e991522ca7e64e$var$isMoved(notMoved, moved) {\n    for(let i = 0; i < notMoved.length; i++)for(let j = 0; j < notMoved[0].length; j++){\n        if (notMoved[i][j] !== moved[i][j]) return true;\n    }\n    return false;\n}\nfunction $09e991522ca7e64e$var$slideRow() {\n    for(let r = 0; r < $09e991522ca7e64e$var$rows; r++){\n        for(let c = 0; c < $09e991522ca7e64e$var$columns; c++){\n            let i = c;\n            while($09e991522ca7e64e$var$field[r][i] === 0 && i <= 3){\n                i++;\n                if (i <= 3) {\n                    if ($09e991522ca7e64e$var$field[r][i] !== 0) {\n                        $09e991522ca7e64e$var$field[r][c] = $09e991522ca7e64e$var$field[r][i];\n                        $09e991522ca7e64e$var$field[r][i] = 0;\n                        i = 0;\n                        $09e991522ca7e64e$var$updateInterface();\n                    }\n                }\n            }\n        }\n        $09e991522ca7e64e$var$updateInterface();\n    }\n}\nfunction $09e991522ca7e64e$var$canMove() {\n    for(let i = 0; i < $09e991522ca7e64e$var$rows; i++)for(let j = 0; j < $09e991522ca7e64e$var$columns; j++){\n        if ($09e991522ca7e64e$var$field[i][j] === 0) return true;\n        if (j < $09e991522ca7e64e$var$rows - 1 && $09e991522ca7e64e$var$field[i][j] === $09e991522ca7e64e$var$field[i][j + 1]) return true;\n        if (i < $09e991522ca7e64e$var$columns - 1 && $09e991522ca7e64e$var$field[i][j] === $09e991522ca7e64e$var$field[i + 1][j]) return true;\n    }\n    return false;\n}\nfunction $09e991522ca7e64e$var$slide() {\n    const newMatrix = [];\n    for(let i = 0; i < $09e991522ca7e64e$var$field.length; i++)newMatrix[i] = $09e991522ca7e64e$var$field[i].slice();\n    $09e991522ca7e64e$var$slideRow();\n    for(let row = 0; row < $09e991522ca7e64e$var$rows; row++){\n        for(let column = 0; column < $09e991522ca7e64e$var$columns; column++)if ($09e991522ca7e64e$var$field[row][column] === $09e991522ca7e64e$var$field[row][column + 1]) {\n            $09e991522ca7e64e$var$field[row][column] *= 2;\n            $09e991522ca7e64e$var$field[row][column + 1] = 0;\n            $09e991522ca7e64e$var$score += $09e991522ca7e64e$var$field[row][column];\n            $09e991522ca7e64e$var$updateInterface();\n        }\n    }\n    $09e991522ca7e64e$var$slideRow();\n    if ($09e991522ca7e64e$var$isMoved(newMatrix, $09e991522ca7e64e$var$field)) $09e991522ca7e64e$var$makeItem();\n}\nfunction $09e991522ca7e64e$var$rotateField(countOfRotates = 1) {\n    for(let k = 0; k < countOfRotates; k++){\n        for(let i = 0; i < $09e991522ca7e64e$var$fieldCell.length; i++){\n            $09e991522ca7e64e$var$removeClassesExceptOne($09e991522ca7e64e$var$fieldCell[i]);\n            $09e991522ca7e64e$var$fieldCell[i].textContent = \"\";\n            $09e991522ca7e64e$var$updateInterface();\n        }\n        $09e991522ca7e64e$var$field = $09e991522ca7e64e$var$rotateMatrixClockwise($09e991522ca7e64e$var$field);\n    }\n    $09e991522ca7e64e$var$updateInterface();\n}\nfunction $09e991522ca7e64e$var$rotateMatrixClockwise(matrix) {\n    const result = Array.from({\n        length: $09e991522ca7e64e$var$columns\n    }, ()=>Array($09e991522ca7e64e$var$rows).fill(0));\n    for(let i = 0; i < $09e991522ca7e64e$var$rows; i++)for(let j = 0; j < $09e991522ca7e64e$var$columns; j++)result[j][$09e991522ca7e64e$var$rows - 1 - i] = matrix[i][j];\n    return result;\n}\ndocument.addEventListener(\"keyup\", function(eventKey) {\n    eventKey.preventDefault();\n    switch(eventKey.code){\n        case \"ArrowLeft\":\n            $09e991522ca7e64e$var$rotateField(4);\n            $09e991522ca7e64e$var$slide();\n            $09e991522ca7e64e$var$updateInterface();\n            break;\n        case \"ArrowRight\":\n            $09e991522ca7e64e$var$rotateField(2);\n            $09e991522ca7e64e$var$slide();\n            $09e991522ca7e64e$var$rotateField(2);\n            break;\n        case \"ArrowUp\":\n            $09e991522ca7e64e$var$rotateField(3);\n            $09e991522ca7e64e$var$slide();\n            $09e991522ca7e64e$var$rotateField();\n            break;\n        case \"ArrowDown\":\n            $09e991522ca7e64e$var$rotateField();\n            $09e991522ca7e64e$var$slide();\n            $09e991522ca7e64e$var$rotateField(3);\n            break;\n        default:\n            return;\n    }\n    if (!$09e991522ca7e64e$var$canMove()) $09e991522ca7e64e$var$messageLose.classList.remove(\"hidden\");\n    $09e991522ca7e64e$var$gameScore.textContent = $09e991522ca7e64e$var$score;\n    if ($09e991522ca7e64e$var$fieldCell.some((x)=>x.classList.contains(\"field-cell--2048\"))) {\n        $09e991522ca7e64e$var$messageWin.classList.remove(\"hidden\");\n        $09e991522ca7e64e$var$messageStart.classList.add(\"hidden\");\n    }\n});\nlet $09e991522ca7e64e$var$startX = 0;\nlet $09e991522ca7e64e$var$startY = 0;\ndocument.addEventListener(\"touchstart\", function(eventKey) {\n    $09e991522ca7e64e$var$startX = eventKey.touches[0].clientX;\n    $09e991522ca7e64e$var$startY = eventKey.touches[0].clientY;\n});\ndocument.addEventListener(\"touchmove\", function(eventKey) {\n    eventKey.preventDefault();\n});\ndocument.addEventListener(\"touchend\", function(eventKey) {\n    const endX = eventKey.changedTouches[0].clientX;\n    const endY = eventKey.changedTouches[0].clientY;\n    const deltaX = endX - $09e991522ca7e64e$var$startX;\n    const deltaY = endY - $09e991522ca7e64e$var$startY;\n    if (Math.abs(deltaX) > Math.abs(deltaY)) {\n        if (deltaX > 0) {\n            $09e991522ca7e64e$var$rotateField(2);\n            $09e991522ca7e64e$var$slide();\n            $09e991522ca7e64e$var$rotateField(2);\n        } else {\n            $09e991522ca7e64e$var$rotateField(4);\n            $09e991522ca7e64e$var$slide();\n            $09e991522ca7e64e$var$updateInterface();\n        }\n    } else if (deltaY > 0) {\n        $09e991522ca7e64e$var$rotateField();\n        $09e991522ca7e64e$var$slide();\n        $09e991522ca7e64e$var$rotateField(3);\n    } else {\n        $09e991522ca7e64e$var$rotateField(3);\n        $09e991522ca7e64e$var$slide();\n        $09e991522ca7e64e$var$rotateField();\n    }\n    if (!$09e991522ca7e64e$var$canMove()) $09e991522ca7e64e$var$messageLose.classList.remove(\"hidden\");\n    $09e991522ca7e64e$var$gameScore.textContent = $09e991522ca7e64e$var$score;\n    if ($09e991522ca7e64e$var$fieldCell.some((x)=>x.classList.contains(\"field-cell--2048\"))) {\n        $09e991522ca7e64e$var$messageWin.classList.remove(\"hidden\");\n        $09e991522ca7e64e$var$messageStart.classList.add(\"hidden\");\n    }\n});\n\n\n//# sourceMappingURL=index.d0c79547.js.map\n","'use strict';\n\nconst button = document.querySelector('.button');\nconst messageStart = document.querySelector('.message-start');\nconst messageWin = document.querySelector('.message-win');\nconst messageLose = document.querySelector('.message-lose');\nconst fieldCell = Array.from(document.querySelectorAll('.field-cell'));\nconst gameScore = document.querySelector('.game-score');\n\nconst rows = 4;\nconst columns = 4;\nlet score = 0;\nlet field = Array.from({ length: columns }, () => Array(rows).fill(0));\n\nupdateInterface();\n\nbutton.addEventListener('click', () => {\n  field = Array.from({ length: columns }, () => Array(rows).fill(0));\n  score = 0;\n  gameScore.textContent = score;\n\n  button.classList.remove('start');\n  button.classList.add('restart');\n  button.textContent = 'Restart';\n  messageStart.classList.add('hidden');\n  messageWin.classList.add('hidden');\n  messageLose.classList.add('hidden');\n\n  updateInterface();\n  makeItem(2);\n  updateInterface();\n});\n\nfunction removeClassesExceptOne(element, classToKeep = ('field-cell')) {\n  const classes = element.classList;\n  const classesToRemove = Array.from(classes);\n\n  classesToRemove.forEach(function(className) {\n    if (className !== classToKeep) {\n      classes.remove(className);\n    }\n  });\n}\n\nfunction getRandom(countVars) {\n  return Math.round(Math.random() * (countVars - 1));\n}\n\nfunction makeItem(countOfItems = 1) {\n  updateInterface();\n\n  let randomRow = getRandom(rows);\n  let randomCol = getRandom(columns);\n\n  if (messageWin.classList.contains('hidden')) {\n    if (messageStart.classList.length === 3) {\n      if (field.some(x => x.some(y => y === 0))) {\n        for (let i = 0; i < countOfItems; i++) {\n          while (field[randomRow][randomCol] !== 0) {\n            randomRow = getRandom(rows);\n            randomCol = getRandom(columns);\n          }\n\n          const value = getRandom(100) < 10 ? 4 : 2;\n\n          field[randomRow][randomCol] = value;\n          updateInterface();\n        }\n      } else {\n        messageLose.classList.remove('hidden');\n      }\n    }\n  }\n}\n\nfunction updateInterface() {\n  field.forEach((row, rowIndex) => {\n    row.forEach((value, colIndex) => {\n      const cell = fieldCell[rowIndex * 4 + colIndex];\n\n      cell.textContent = '';\n      removeClassesExceptOne(cell);\n      cell.classList.add('field-cell--0');\n      cell.classList.add(`field-cell--${value}`);\n\n      cell.textContent = value === 0 ? '' : value;\n    });\n  });\n}\n\nfunction isMoved(notMoved, moved) {\n  for (let i = 0; i < notMoved.length; i++) {\n    for (let j = 0; j < notMoved[0].length; j++) {\n      if (notMoved[i][j] !== moved[i][j]) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction slideRow() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      let i = c;\n\n      while (field[r][i] === 0 && i <= 3) {\n        i++;\n\n        if (i <= 3) {\n          if (field[r][i] !== 0) {\n            field[r][c] = field[r][i];\n            field[r][i] = 0;\n            i = 0;\n            updateInterface();\n          }\n        }\n      }\n    }\n\n    updateInterface();\n  }\n}\n\nfunction canMove() {\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < columns; j++) {\n      if (field[i][j] === 0) {\n        return true;\n      }\n\n      if (j < rows - 1 && field[i][j] === field[i][j + 1]) {\n        return true;\n      }\n\n      if (i < columns - 1 && field[i][j] === field[i + 1][j]) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction slide() {\n  const newMatrix = [];\n\n  for (let i = 0; i < field.length; i++) {\n    newMatrix[i] = field[i].slice();\n  }\n\n  slideRow();\n\n  for (let row = 0; row < rows; row++) {\n    for (let column = 0; column < columns; column++) {\n      if (field[row][column] === field[row][column + 1]) {\n        field[row][column] *= 2;\n        field[row][column + 1] = 0;\n        score += field[row][column];\n        updateInterface();\n      }\n    }\n  }\n\n  slideRow();\n\n  if (isMoved(newMatrix, field)) {\n    makeItem();\n  }\n}\n\nfunction rotateField(countOfRotates = 1) {\n  for (let k = 0; k < countOfRotates; k++) {\n    for (let i = 0; i < fieldCell.length; i++) {\n      removeClassesExceptOne(fieldCell[i]);\n      fieldCell[i].textContent = '';\n      updateInterface();\n    }\n\n    field = rotateMatrixClockwise(field);\n  }\n\n  updateInterface();\n}\n\nfunction rotateMatrixClockwise(matrix) {\n  const result = Array.from({ length: columns }, () => Array(rows).fill(0));\n\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < columns; j++) {\n      result[j][rows - 1 - i] = matrix[i][j];\n    }\n  }\n\n  return result;\n}\n\ndocument.addEventListener('keyup', function(eventKey) {\n  eventKey.preventDefault();\n\n  switch (eventKey.code) {\n    case 'ArrowLeft':\n      rotateField(4);\n\n      slide();\n      updateInterface();\n\n      break;\n\n    case 'ArrowRight':\n      rotateField(2);\n      slide();\n      rotateField(2);\n      break;\n\n    case 'ArrowUp':\n      rotateField(3);\n      slide();\n      rotateField();\n      break;\n\n    case 'ArrowDown':\n      rotateField();\n      slide();\n      rotateField(3);\n      break;\n\n    default:\n      return;\n  }\n\n  if (!canMove()) {\n    messageLose.classList.remove('hidden');\n  }\n\n  gameScore.textContent = score;\n\n  if (fieldCell.some(x => x.classList.contains('field-cell--2048'))) {\n    messageWin.classList.remove('hidden');\n    messageStart.classList.add('hidden');\n  }\n});\n\nlet startX = 0;\nlet startY = 0;\n\ndocument.addEventListener('touchstart', function(eventKey) {\n  startX = eventKey.touches[0].clientX;\n  startY = eventKey.touches[0].clientY;\n});\n\ndocument.addEventListener('touchmove', function(eventKey) {\n  eventKey.preventDefault();\n});\n\ndocument.addEventListener('touchend', function(eventKey) {\n  const endX = eventKey.changedTouches[0].clientX;\n  const endY = eventKey.changedTouches[0].clientY;\n\n  const deltaX = endX - startX;\n  const deltaY = endY - startY;\n\n  if (Math.abs(deltaX) > Math.abs(deltaY)) {\n    if (deltaX > 0) {\n      rotateField(2);\n      slide();\n      rotateField(2);\n    } else {\n      rotateField(4);\n      slide();\n      updateInterface();\n    }\n  } else {\n    if (deltaY > 0) {\n      rotateField();\n      slide();\n      rotateField(3);\n    } else {\n      rotateField(3);\n      slide();\n      rotateField();\n    }\n  }\n\n  if (!canMove()) {\n    messageLose.classList.remove('hidden');\n  }\n\n  gameScore.textContent = score;\n\n  if (fieldCell.some(x => x.classList.contains('field-cell--2048'))) {\n    messageWin.classList.remove('hidden');\n    messageStart.classList.add('hidden');\n  }\n});\n"],"names":["$09e991522ca7e64e$var$button","document","querySelector","$09e991522ca7e64e$var$messageStart","$09e991522ca7e64e$var$messageWin","$09e991522ca7e64e$var$messageLose","$09e991522ca7e64e$var$fieldCell","Array","from","querySelectorAll","$09e991522ca7e64e$var$gameScore","$09e991522ca7e64e$var$score","$09e991522ca7e64e$var$field","length","fill","$09e991522ca7e64e$var$removeClassesExceptOne","element","classToKeep","classes","classList","classesToRemove","forEach","className","remove","$09e991522ca7e64e$var$getRandom","countVars","Math","round","random","$09e991522ca7e64e$var$makeItem","countOfItems","$09e991522ca7e64e$var$updateInterface","randomRow","randomCol","contains","some","x","y","i","value","row","rowIndex","colIndex","cell","textContent","add","$09e991522ca7e64e$var$slideRow","r","c","$09e991522ca7e64e$var$canMove","j","$09e991522ca7e64e$var$rows","$09e991522ca7e64e$var$columns","$09e991522ca7e64e$var$slide","newMatrix","slice","column","$09e991522ca7e64e$var$isMoved","notMoved","moved","$09e991522ca7e64e$var$rotateField","countOfRotates","k","$09e991522ca7e64e$var$rotateMatrixClockwise","matrix","result","addEventListener","eventKey","preventDefault","code","$09e991522ca7e64e$var$startX","$09e991522ca7e64e$var$startY","touches","clientX","clientY","endX","changedTouches","endY","deltaX","deltaY","abs"],"version":3,"file":"index.d0c79547.js.map"}