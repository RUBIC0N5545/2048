{"mappings":"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","sources":["<anon>","src/scripts/main.js"],"sourcesContent":["(function () {\nvar $197cd56b15c33885$exports = {};\n\"use strict\";\nvar $197cd56b15c33885$var$button = document.querySelector(\".button\");\nvar $197cd56b15c33885$var$messageStart = document.querySelector(\".message-start\");\nvar $197cd56b15c33885$var$messageWin = document.querySelector(\".message-win\");\nvar $197cd56b15c33885$var$messageLose = document.querySelector(\".message-lose\");\nvar $197cd56b15c33885$var$fieldCell = Array.from(document.querySelectorAll(\".field-cell\"));\nvar $197cd56b15c33885$var$gameScore = document.querySelector(\".game-score\");\nvar $197cd56b15c33885$var$rows = 4;\nvar $197cd56b15c33885$var$columns = 4;\nvar $197cd56b15c33885$var$score = 0;\nvar $197cd56b15c33885$var$field = Array.from({\n    length: $197cd56b15c33885$var$columns\n}, function() {\n    return Array($197cd56b15c33885$var$rows).fill(0);\n});\n$197cd56b15c33885$var$updateInterface();\n$197cd56b15c33885$var$button.addEventListener(\"click\", function() {\n    $197cd56b15c33885$var$field = Array.from({\n        length: $197cd56b15c33885$var$columns\n    }, function() {\n        return Array($197cd56b15c33885$var$rows).fill(0);\n    });\n    $197cd56b15c33885$var$score = 0;\n    $197cd56b15c33885$var$gameScore.textContent = $197cd56b15c33885$var$score;\n    $197cd56b15c33885$var$button.classList.remove(\"start\");\n    $197cd56b15c33885$var$button.classList.add(\"restart\");\n    $197cd56b15c33885$var$button.textContent = \"Restart\";\n    $197cd56b15c33885$var$messageStart.classList.add(\"hidden\");\n    $197cd56b15c33885$var$messageWin.classList.add(\"hidden\");\n    $197cd56b15c33885$var$messageLose.classList.add(\"hidden\");\n    $197cd56b15c33885$var$updateInterface();\n    $197cd56b15c33885$var$makeItem(2);\n    $197cd56b15c33885$var$updateInterface();\n});\nfunction $197cd56b15c33885$var$removeClassesExceptOne(element) {\n    var classToKeep = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : \"field-cell\";\n    var classes = element.classList;\n    var classesToRemove = Array.from(classes);\n    classesToRemove.forEach(function(className) {\n        if (className !== classToKeep) classes.remove(className);\n    });\n}\nfunction $197cd56b15c33885$var$getRandom(countVars) {\n    return Math.round(Math.random() * (countVars - 1));\n}\nfunction $197cd56b15c33885$var$makeItem() {\n    var countOfItems = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1;\n    $197cd56b15c33885$var$updateInterface();\n    var randomRow = $197cd56b15c33885$var$getRandom($197cd56b15c33885$var$rows);\n    var randomCol = $197cd56b15c33885$var$getRandom($197cd56b15c33885$var$columns);\n    if ($197cd56b15c33885$var$messageWin.classList.contains(\"hidden\")) {\n        if ($197cd56b15c33885$var$messageStart.classList.length === 3) {\n            if ($197cd56b15c33885$var$field.some(function(x) {\n                return x.some(function(y) {\n                    return y === 0;\n                });\n            })) for(var i = 0; i < countOfItems; i++){\n                while($197cd56b15c33885$var$field[randomRow][randomCol] !== 0){\n                    randomRow = $197cd56b15c33885$var$getRandom($197cd56b15c33885$var$rows);\n                    randomCol = $197cd56b15c33885$var$getRandom($197cd56b15c33885$var$columns);\n                }\n                var value = $197cd56b15c33885$var$getRandom(100) < 10 ? 4 : 2;\n                $197cd56b15c33885$var$field[randomRow][randomCol] = value;\n                $197cd56b15c33885$var$updateInterface();\n            }\n            else $197cd56b15c33885$var$messageLose.classList.remove(\"hidden\");\n        }\n    }\n}\nfunction $197cd56b15c33885$var$updateInterface() {\n    $197cd56b15c33885$var$field.forEach(function(row, rowIndex) {\n        row.forEach(function(value, colIndex) {\n            var cell = $197cd56b15c33885$var$fieldCell[rowIndex * 4 + colIndex];\n            cell.textContent = \"\";\n            $197cd56b15c33885$var$removeClassesExceptOne(cell);\n            cell.classList.add(\"field-cell--0\");\n            cell.classList.add(\"field-cell--\".concat(value));\n            cell.textContent = value === 0 ? \"\" : value;\n        });\n    });\n}\nfunction $197cd56b15c33885$var$isMoved(notMoved, moved) {\n    for(var i = 0; i < notMoved.length; i++)for(var j = 0; j < notMoved[0].length; j++){\n        if (notMoved[i][j] !== moved[i][j]) return true;\n    }\n    return false;\n}\nfunction $197cd56b15c33885$var$slideRow() {\n    for(var r = 0; r < $197cd56b15c33885$var$rows; r++){\n        for(var c = 0; c < $197cd56b15c33885$var$columns; c++){\n            var i = c;\n            while($197cd56b15c33885$var$field[r][i] === 0 && i <= 3){\n                i++;\n                if (i <= 3) {\n                    if ($197cd56b15c33885$var$field[r][i] !== 0) {\n                        $197cd56b15c33885$var$field[r][c] = $197cd56b15c33885$var$field[r][i];\n                        $197cd56b15c33885$var$field[r][i] = 0;\n                        i = 0;\n                        $197cd56b15c33885$var$updateInterface();\n                    }\n                }\n            }\n        }\n        $197cd56b15c33885$var$updateInterface();\n    }\n}\nfunction $197cd56b15c33885$var$canMove() {\n    for(var i = 0; i < $197cd56b15c33885$var$rows; i++)for(var j = 0; j < $197cd56b15c33885$var$columns; j++){\n        if ($197cd56b15c33885$var$field[i][j] === 0) return true;\n        if (j < $197cd56b15c33885$var$rows - 1 && $197cd56b15c33885$var$field[i][j] === $197cd56b15c33885$var$field[i][j + 1]) return true;\n        if (i < $197cd56b15c33885$var$columns - 1 && $197cd56b15c33885$var$field[i][j] === $197cd56b15c33885$var$field[i + 1][j]) return true;\n    }\n    return false;\n}\nfunction $197cd56b15c33885$var$slide() {\n    var newMatrix = [];\n    for(var i = 0; i < $197cd56b15c33885$var$field.length; i++)newMatrix[i] = $197cd56b15c33885$var$field[i].slice();\n    $197cd56b15c33885$var$slideRow();\n    for(var row = 0; row < $197cd56b15c33885$var$rows; row++){\n        for(var column = 0; column < $197cd56b15c33885$var$columns; column++)if ($197cd56b15c33885$var$field[row][column] === $197cd56b15c33885$var$field[row][column + 1]) {\n            $197cd56b15c33885$var$field[row][column] *= 2;\n            $197cd56b15c33885$var$field[row][column + 1] = 0;\n            $197cd56b15c33885$var$score += $197cd56b15c33885$var$field[row][column];\n            $197cd56b15c33885$var$updateInterface();\n        }\n    }\n    $197cd56b15c33885$var$slideRow();\n    if ($197cd56b15c33885$var$isMoved(newMatrix, $197cd56b15c33885$var$field)) $197cd56b15c33885$var$makeItem();\n}\nfunction $197cd56b15c33885$var$rotateField() {\n    var countOfRotates = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1;\n    for(var k = 0; k < countOfRotates; k++){\n        for(var i = 0; i < $197cd56b15c33885$var$fieldCell.length; i++){\n            $197cd56b15c33885$var$removeClassesExceptOne($197cd56b15c33885$var$fieldCell[i]);\n            $197cd56b15c33885$var$fieldCell[i].textContent = \"\";\n            $197cd56b15c33885$var$updateInterface();\n        }\n        $197cd56b15c33885$var$field = $197cd56b15c33885$var$rotateMatrixClockwise($197cd56b15c33885$var$field);\n    }\n    $197cd56b15c33885$var$updateInterface();\n}\nfunction $197cd56b15c33885$var$rotateMatrixClockwise(matrix) {\n    var result = Array.from({\n        length: $197cd56b15c33885$var$columns\n    }, function() {\n        return Array($197cd56b15c33885$var$rows).fill(0);\n    });\n    for(var i = 0; i < $197cd56b15c33885$var$rows; i++)for(var j = 0; j < $197cd56b15c33885$var$columns; j++)result[j][$197cd56b15c33885$var$rows - 1 - i] = matrix[i][j];\n    return result;\n}\ndocument.addEventListener(\"keyup\", function(eventKey) {\n    eventKey.preventDefault();\n    switch(eventKey.code){\n        case \"ArrowLeft\":\n            $197cd56b15c33885$var$rotateField(4);\n            $197cd56b15c33885$var$slide();\n            $197cd56b15c33885$var$updateInterface();\n            break;\n        case \"ArrowRight\":\n            $197cd56b15c33885$var$rotateField(2);\n            $197cd56b15c33885$var$slide();\n            $197cd56b15c33885$var$rotateField(2);\n            break;\n        case \"ArrowUp\":\n            $197cd56b15c33885$var$rotateField(3);\n            $197cd56b15c33885$var$slide();\n            $197cd56b15c33885$var$rotateField();\n            break;\n        case \"ArrowDown\":\n            $197cd56b15c33885$var$rotateField();\n            $197cd56b15c33885$var$slide();\n            $197cd56b15c33885$var$rotateField(3);\n            break;\n        default:\n            return;\n    }\n    if (!$197cd56b15c33885$var$canMove()) $197cd56b15c33885$var$messageLose.classList.remove(\"hidden\");\n    $197cd56b15c33885$var$gameScore.textContent = $197cd56b15c33885$var$score;\n    if ($197cd56b15c33885$var$fieldCell.some(function(x) {\n        return x.classList.contains(\"field-cell--2048\");\n    })) {\n        $197cd56b15c33885$var$messageWin.classList.remove(\"hidden\");\n        $197cd56b15c33885$var$messageStart.classList.add(\"hidden\");\n    }\n});\nvar $197cd56b15c33885$var$startX = 0;\nvar $197cd56b15c33885$var$startY = 0;\ndocument.addEventListener(\"touchstart\", function(eventKey) {\n    $197cd56b15c33885$var$startX = eventKey.touches[0].clientX;\n    $197cd56b15c33885$var$startY = eventKey.touches[0].clientY;\n});\ndocument.addEventListener(\"touchmove\", function(eventKey) {\n    eventKey.preventDefault();\n});\ndocument.addEventListener(\"touchend\", function(eventKey) {\n    var endX = eventKey.changedTouches[0].clientX;\n    var endY = eventKey.changedTouches[0].clientY;\n    var deltaX = endX - $197cd56b15c33885$var$startX;\n    var deltaY = endY - $197cd56b15c33885$var$startY;\n    if (Math.abs(deltaX) > Math.abs(deltaY)) {\n        if (deltaX > 0) {\n            $197cd56b15c33885$var$rotateField(2);\n            $197cd56b15c33885$var$slide();\n            $197cd56b15c33885$var$rotateField(2);\n        } else {\n            $197cd56b15c33885$var$rotateField(4);\n            $197cd56b15c33885$var$slide();\n            $197cd56b15c33885$var$updateInterface();\n        }\n    } else if (deltaY > 0) {\n        $197cd56b15c33885$var$rotateField();\n        $197cd56b15c33885$var$slide();\n        $197cd56b15c33885$var$rotateField(3);\n    } else {\n        $197cd56b15c33885$var$rotateField(3);\n        $197cd56b15c33885$var$slide();\n        $197cd56b15c33885$var$rotateField();\n    }\n    if (!$197cd56b15c33885$var$canMove()) $197cd56b15c33885$var$messageLose.classList.remove(\"hidden\");\n    $197cd56b15c33885$var$gameScore.textContent = $197cd56b15c33885$var$score;\n    if ($197cd56b15c33885$var$fieldCell.some(function(x) {\n        return x.classList.contains(\"field-cell--2048\");\n    })) {\n        $197cd56b15c33885$var$messageWin.classList.remove(\"hidden\");\n        $197cd56b15c33885$var$messageStart.classList.add(\"hidden\");\n    }\n});\n\n})();\n//# sourceMappingURL=index.5efe9d0e.js.map\n","'use strict';\n\nconst button = document.querySelector('.button');\nconst messageStart = document.querySelector('.message-start');\nconst messageWin = document.querySelector('.message-win');\nconst messageLose = document.querySelector('.message-lose');\nconst fieldCell = Array.from(document.querySelectorAll('.field-cell'));\nconst gameScore = document.querySelector('.game-score');\n\nconst rows = 4;\nconst columns = 4;\nlet score = 0;\nlet field = Array.from({ length: columns }, () => Array(rows).fill(0));\n\nupdateInterface();\n\nbutton.addEventListener('click', () => {\n  field = Array.from({ length: columns }, () => Array(rows).fill(0));\n  score = 0;\n  gameScore.textContent = score;\n\n  button.classList.remove('start');\n  button.classList.add('restart');\n  button.textContent = 'Restart';\n  messageStart.classList.add('hidden');\n  messageWin.classList.add('hidden');\n  messageLose.classList.add('hidden');\n\n  updateInterface();\n  makeItem(2);\n  updateInterface();\n});\n\nfunction removeClassesExceptOne(element, classToKeep = ('field-cell')) {\n  const classes = element.classList;\n  const classesToRemove = Array.from(classes);\n\n  classesToRemove.forEach(function(className) {\n    if (className !== classToKeep) {\n      classes.remove(className);\n    }\n  });\n}\n\nfunction getRandom(countVars) {\n  return Math.round(Math.random() * (countVars - 1));\n}\n\nfunction makeItem(countOfItems = 1) {\n  updateInterface();\n\n  let randomRow = getRandom(rows);\n  let randomCol = getRandom(columns);\n\n  if (messageWin.classList.contains('hidden')) {\n    if (messageStart.classList.length === 3) {\n      if (field.some(x => x.some(y => y === 0))) {\n        for (let i = 0; i < countOfItems; i++) {\n          while (field[randomRow][randomCol] !== 0) {\n            randomRow = getRandom(rows);\n            randomCol = getRandom(columns);\n          }\n\n          const value = getRandom(100) < 10 ? 4 : 2;\n\n          field[randomRow][randomCol] = value;\n          updateInterface();\n        }\n      } else {\n        messageLose.classList.remove('hidden');\n      }\n    }\n  }\n}\n\nfunction updateInterface() {\n  field.forEach((row, rowIndex) => {\n    row.forEach((value, colIndex) => {\n      const cell = fieldCell[rowIndex * 4 + colIndex];\n\n      cell.textContent = '';\n      removeClassesExceptOne(cell);\n      cell.classList.add('field-cell--0');\n      cell.classList.add(`field-cell--${value}`);\n\n      cell.textContent = value === 0 ? '' : value;\n    });\n  });\n}\n\nfunction isMoved(notMoved, moved) {\n  for (let i = 0; i < notMoved.length; i++) {\n    for (let j = 0; j < notMoved[0].length; j++) {\n      if (notMoved[i][j] !== moved[i][j]) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction slideRow() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      let i = c;\n\n      while (field[r][i] === 0 && i <= 3) {\n        i++;\n\n        if (i <= 3) {\n          if (field[r][i] !== 0) {\n            field[r][c] = field[r][i];\n            field[r][i] = 0;\n            i = 0;\n            updateInterface();\n          }\n        }\n      }\n    }\n\n    updateInterface();\n  }\n}\n\nfunction canMove() {\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < columns; j++) {\n      if (field[i][j] === 0) {\n        return true;\n      }\n\n      if (j < rows - 1 && field[i][j] === field[i][j + 1]) {\n        return true;\n      }\n\n      if (i < columns - 1 && field[i][j] === field[i + 1][j]) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction slide() {\n  const newMatrix = [];\n\n  for (let i = 0; i < field.length; i++) {\n    newMatrix[i] = field[i].slice();\n  }\n\n  slideRow();\n\n  for (let row = 0; row < rows; row++) {\n    for (let column = 0; column < columns; column++) {\n      if (field[row][column] === field[row][column + 1]) {\n        field[row][column] *= 2;\n        field[row][column + 1] = 0;\n        score += field[row][column];\n        updateInterface();\n      }\n    }\n  }\n\n  slideRow();\n\n  if (isMoved(newMatrix, field)) {\n    makeItem();\n  }\n}\n\nfunction rotateField(countOfRotates = 1) {\n  for (let k = 0; k < countOfRotates; k++) {\n    for (let i = 0; i < fieldCell.length; i++) {\n      removeClassesExceptOne(fieldCell[i]);\n      fieldCell[i].textContent = '';\n      updateInterface();\n    }\n\n    field = rotateMatrixClockwise(field);\n  }\n\n  updateInterface();\n}\n\nfunction rotateMatrixClockwise(matrix) {\n  const result = Array.from({ length: columns }, () => Array(rows).fill(0));\n\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < columns; j++) {\n      result[j][rows - 1 - i] = matrix[i][j];\n    }\n  }\n\n  return result;\n}\n\ndocument.addEventListener('keyup', function(eventKey) {\n  eventKey.preventDefault();\n\n  switch (eventKey.code) {\n    case 'ArrowLeft':\n      rotateField(4);\n\n      slide();\n      updateInterface();\n\n      break;\n\n    case 'ArrowRight':\n      rotateField(2);\n      slide();\n      rotateField(2);\n      break;\n\n    case 'ArrowUp':\n      rotateField(3);\n      slide();\n      rotateField();\n      break;\n\n    case 'ArrowDown':\n      rotateField();\n      slide();\n      rotateField(3);\n      break;\n\n    default:\n      return;\n  }\n\n  if (!canMove()) {\n    messageLose.classList.remove('hidden');\n  }\n\n  gameScore.textContent = score;\n\n  if (fieldCell.some(x => x.classList.contains('field-cell--2048'))) {\n    messageWin.classList.remove('hidden');\n    messageStart.classList.add('hidden');\n  }\n});\n\nlet startX = 0;\nlet startY = 0;\n\ndocument.addEventListener('touchstart', function(eventKey) {\n  startX = eventKey.touches[0].clientX;\n  startY = eventKey.touches[0].clientY;\n});\n\ndocument.addEventListener('touchmove', function(eventKey) {\n  eventKey.preventDefault();\n});\n\ndocument.addEventListener('touchend', function(eventKey) {\n  const endX = eventKey.changedTouches[0].clientX;\n  const endY = eventKey.changedTouches[0].clientY;\n\n  const deltaX = endX - startX;\n  const deltaY = endY - startY;\n\n  if (Math.abs(deltaX) > Math.abs(deltaY)) {\n    if (deltaX > 0) {\n      rotateField(2);\n      slide();\n      rotateField(2);\n    } else {\n      rotateField(4);\n      slide();\n      updateInterface();\n    }\n  } else {\n    if (deltaY > 0) {\n      rotateField();\n      slide();\n      rotateField(3);\n    } else {\n      rotateField(3);\n      slide();\n      rotateField();\n    }\n  }\n\n  if (!canMove()) {\n    messageLose.classList.remove('hidden');\n  }\n\n  gameScore.textContent = score;\n\n  if (fieldCell.some(x => x.classList.contains('field-cell--2048'))) {\n    messageWin.classList.remove('hidden');\n    messageStart.classList.add('hidden');\n  }\n});\n"],"names":["$197cd56b15c33885$var$button","document","querySelector","$197cd56b15c33885$var$messageStart","$197cd56b15c33885$var$messageWin","$197cd56b15c33885$var$messageLose","$197cd56b15c33885$var$fieldCell","Array","from","querySelectorAll","$197cd56b15c33885$var$gameScore","$197cd56b15c33885$var$score","$197cd56b15c33885$var$field","length","fill","$197cd56b15c33885$var$removeClassesExceptOne","element","classToKeep","arguments","classes","classList","classesToRemove","forEach","className","remove","$197cd56b15c33885$var$getRandom","countVars","Math","round","random","$197cd56b15c33885$var$makeItem","countOfItems","$197cd56b15c33885$var$updateInterface","randomRow","randomCol","contains","some","x","y","i","value","row","rowIndex","colIndex","cell","textContent","add","concat","$197cd56b15c33885$var$slideRow","r","c","$197cd56b15c33885$var$canMove","j","$197cd56b15c33885$var$rows","$197cd56b15c33885$var$columns","$197cd56b15c33885$var$slide","newMatrix","slice","column","$197cd56b15c33885$var$isMoved","notMoved","moved","$197cd56b15c33885$var$rotateField","countOfRotates","k","$197cd56b15c33885$var$rotateMatrixClockwise","matrix","result","addEventListener","eventKey","preventDefault","code","$197cd56b15c33885$var$startX","$197cd56b15c33885$var$startY","touches","clientX","clientY","endX","changedTouches","endY","deltaX","deltaY","abs"],"version":3,"file":"index.5efe9d0e.js.map"}