const e=document.querySelector(".button"),t=document.querySelector(".message-start"),n=document.querySelector(".message-win"),o=document.querySelector(".message-lose"),s=Array.from(document.querySelectorAll(".field-cell")),r=document.querySelector(".game-score");let l=0,c=Array.from({length:4},()=>[,,,,].fill(0));function i(e,t="field-cell"){let n=e.classList;Array.from(n).forEach(function(e){e!==t&&n.remove(e)})}function a(e){return Math.round(Math.random()*(e-1))}function d(e=1){f();let s=a(4),r=a(4);if(n.classList.contains("hidden")&&3===t.classList.length){if(c.some(e=>e.some(e=>0===e)))for(let t=0;t<e;t++){for(;0!==c[s][r];)s=a(4),r=a(4);let e=10>a(100)?4:2;c[s][r]=e,f()}else o.classList.remove("hidden")}}function f(){c.forEach((e,t)=>{e.forEach((e,n)=>{let o=s[4*t+n];o.textContent="",i(o),o.classList.add("field-cell--0"),o.classList.add(`field-cell--${e}`),o.textContent=0===e?"":e})})}function u(){for(let e=0;e<4;e++){for(let t=0;t<4;t++){let n=t;for(;0===c[e][n]&&n<=3;)++n<=3&&0!==c[e][n]&&(c[e][t]=c[e][n],c[e][n]=0,n=0,f())}f()}}function h(){for(let e=0;e<4;e++)for(let t=0;t<4;t++)if(0===c[e][t]||t<3&&c[e][t]===c[e][t+1]||e<3&&c[e][t]===c[e+1][t])return!0;return!1}function m(){let e=[];for(let t=0;t<c.length;t++)e[t]=c[t].slice();u();for(let e=0;e<4;e++)for(let t=0;t<4;t++)c[e][t]===c[e][t+1]&&(c[e][t]*=2,c[e][t+1]=0,l+=c[e][t],f());u(),function(e,t){for(let n=0;n<e.length;n++)for(let o=0;o<e[0].length;o++)if(e[n][o]!==t[n][o])return!0;return!1}(e,c)&&d()}function L(e=1){for(let t=0;t<e;t++){for(let e=0;e<s.length;e++)i(s[e]),s[e].textContent="",f();c=function(e){let t=Array.from({length:4},()=>[,,,,].fill(0));for(let n=0;n<4;n++)for(let o=0;o<4;o++)t[o][3-n]=e[n][o];return t}(c)}f()}f(),e.addEventListener("click",()=>{c=Array.from({length:4},()=>[,,,,].fill(0)),l=0,r.textContent=l,e.classList.remove("start"),e.classList.add("restart"),e.textContent="Restart",t.classList.add("hidden"),n.classList.add("hidden"),o.classList.add("hidden"),f(),d(2),f()}),document.addEventListener("keyup",function(e){switch(e.preventDefault(),e.code){case"ArrowLeft":L(4),m(),f();break;case"ArrowRight":L(2),m(),L(2);break;case"ArrowUp":L(3),m(),L();break;case"ArrowDown":L(),m(),L(3);break;default:return}h()||o.classList.remove("hidden"),r.textContent=l,s.some(e=>e.classList.contains("field-cell--2048"))&&(n.classList.remove("hidden"),t.classList.add("hidden"))});let g=0,v=0;document.addEventListener("touchstart",function(e){g=e.touches[0].clientX,v=e.touches[0].clientY}),document.addEventListener("touchmove",function(e){e.preventDefault()}),document.addEventListener("touchend",function(e){let c=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,a=c-g,d=i-v;Math.abs(a)>Math.abs(d)?a>0?(L(2),m(),L(2)):(L(4),m(),f()):d>0?(L(),m(),L(3)):(L(3),m(),L()),h()||o.classList.remove("hidden"),r.textContent=l,s.some(e=>e.classList.contains("field-cell--2048"))&&(n.classList.remove("hidden"),t.classList.add("hidden"))});
//# sourceMappingURL=index.d0c79547.js.map
