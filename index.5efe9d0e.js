!function(){var e=document.querySelector(".button"),t=document.querySelector(".message-start"),n=document.querySelector(".message-win"),r=document.querySelector(".message-lose"),o=Array.from(document.querySelectorAll(".field-cell")),c=document.querySelector(".game-score"),a=0,s=Array.from({length:4},function(){return[,,,,].fill(0)});function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"field-cell",n=e.classList;Array.from(n).forEach(function(e){e!==t&&n.remove(e)})}function d(e){return Math.round(Math.random()*(e-1))}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;u();var o=d(4),c=d(4);if(n.classList.contains("hidden")&&3===t.classList.length){if(s.some(function(e){return e.some(function(e){return 0===e})}))for(var a=0;a<e;a++){for(;0!==s[o][c];)o=d(4),c=d(4);var i=10>d(100)?4:2;s[o][c]=i,u()}else r.classList.remove("hidden")}}function u(){s.forEach(function(e,t){e.forEach(function(e,n){var r=o[4*t+n];r.textContent="",i(r),r.classList.add("field-cell--0"),r.classList.add("field-cell--".concat(e)),r.textContent=0===e?"":e})})}function f(){for(var e=0;e<4;e++){for(var t=0;t<4;t++)for(var n=t;0===s[e][n]&&n<=3;)++n<=3&&0!==s[e][n]&&(s[e][t]=s[e][n],s[e][n]=0,n=0,u());u()}}function v(){for(var e=0;e<4;e++)for(var t=0;t<4;t++)if(0===s[e][t]||t<3&&s[e][t]===s[e][t+1]||e<3&&s[e][t]===s[e+1][t])return!0;return!1}function h(){for(var e=[],t=0;t<s.length;t++)e[t]=s[t].slice();f();for(var n=0;n<4;n++)for(var r=0;r<4;r++)s[n][r]===s[n][r+1]&&(s[n][r]*=2,s[n][r+1]=0,a+=s[n][r],u());f(),function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e[0].length;r++)if(e[n][r]!==t[n][r])return!0;return!1}(e,s)&&l()}function m(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0;t<e;t++){for(var n=0;n<o.length;n++)i(o[n]),o[n].textContent="",u();s=function(e){for(var t=Array.from({length:4},function(){return[,,,,].fill(0)}),n=0;n<4;n++)for(var r=0;r<4;r++)t[r][3-n]=e[n][r];return t}(s)}u()}u(),e.addEventListener("click",function(){s=Array.from({length:4},function(){return[,,,,].fill(0)}),a=0,c.textContent=a,e.classList.remove("start"),e.classList.add("restart"),e.textContent="Restart",t.classList.add("hidden"),n.classList.add("hidden"),r.classList.add("hidden"),u(),l(2),u()}),document.addEventListener("keyup",function(e){switch(e.preventDefault(),e.code){case"ArrowLeft":m(4),h(),u();break;case"ArrowRight":m(2),h(),m(2);break;case"ArrowUp":m(3),h(),m();break;case"ArrowDown":m(),h(),m(3);break;default:return}v()||r.classList.remove("hidden"),c.textContent=a,o.some(function(e){return e.classList.contains("field-cell--2048")})&&(n.classList.remove("hidden"),t.classList.add("hidden"))});var L=0,g=0;document.addEventListener("touchstart",function(e){L=e.touches[0].clientX,g=e.touches[0].clientY}),document.addEventListener("touchmove",function(e){e.preventDefault()}),document.addEventListener("touchend",function(e){var s=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,d=s-L,l=i-g;Math.abs(d)>Math.abs(l)?d>0?(m(2),h(),m(2)):(m(4),h(),u()):l>0?(m(),h(),m(3)):(m(3),h(),m()),v()||r.classList.remove("hidden"),c.textContent=a,o.some(function(e){return e.classList.contains("field-cell--2048")})&&(n.classList.remove("hidden"),t.classList.add("hidden"))})}();
//# sourceMappingURL=index.5efe9d0e.js.map
